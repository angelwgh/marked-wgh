(function(e,a){var c='<div class="mui-poppicker"><div class="mui-poppicker-header"><button class="mui-btn mui-poppicker-btn-cancel">取消</button><button class="mui-btn mui-btn-blue mui-poppicker-btn-ok">确定</button><div class="mui-poppicker-clear"></div></div><div class="mui-poppicker-body"></div></div>';var d='<div class="mui-listpicker"><div class="mui-listpicker-inner"><ul></ul></div></div>';var b=e.PopPicker=e.Class.extend({init:function(g){var f=this;f.options=g||{};f.options.buttons=f.options.buttons||["取消","确定"];f.panel=e.dom(c)[0];a.body.appendChild(f.panel);f.ok=f.panel.querySelector(".mui-poppicker-btn-ok");f.cancel=f.panel.querySelector(".mui-poppicker-btn-cancel");f.body=f.panel.querySelector(".mui-poppicker-body");f.mask=e.createMask();f.cancel.innerText=f.options.buttons[0];f.ok.innerText=f.options.buttons[1];f.cancel.addEventListener("tap",function(h){f.hide()},false);f.ok.addEventListener("tap",function(i){if(f.callback){var h=f.callback(f.getSelectedItems());if(h!==false){f.hide()}}},false);f.mask[0].addEventListener("tap",function(){f.hide()},false);f._createListPicker()},_createListPicker:function(){var f=this;var j=f.options.layer||1;var k=(100/j)+"%";f.pickers=[];for(var h=1;h<=j;h++){var g=e.dom(d)[0];g.style.width=k;f.body.appendChild(g);e(g).listpicker();f.pickers.push(g);g.addEventListener("change",function(l){var n=this.nextSibling;if(n&&n.listpickerId){var i=l.detail||{};var m=i.item||{};n.setItems(m.s)}},false)}},setData:function(g){var f=this;g=g||[];f.pickers[0].setItems(g)},getSelectedItems:function(){var g=this;var f=[];for(var j in g.pickers){var h=g.pickers[j];f.push(h.getSelectedItem()||{})}return f},show:function(g){var f=this;f.callback=g;f.mask.show();a.body.classList.add(e.className("poppicker-active-for-page"));f.panel.classList.add(e.className("active"))},hide:function(){var f=this;if(f.disposed){return}f.panel.classList.remove(e.className("active"));f.mask.close();a.body.classList.remove(e.className("poppicker-active-for-page"))},dispose:function(){var f=this;f.hide();setTimeout(function(){f.panel.parentNode.removeChild(f.panel);for(var g in f){f[g]=null;delete f[g]}f.disposed=true},300)}})})(mui,document);